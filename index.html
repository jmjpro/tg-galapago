<!DOCTYPE html>
<html lang="en">
	<head>
		<script>document.writeln('<title>' + document.domain + ': Galapago</title>');</script>
		<link rel="stylesheet" type="text/css" href="css/debugConsole.css"/>
		<link rel="stylesheet" type="text/css" href="css/global.css"/>
		<link rel="stylesheet" type="text/css" href="css/mainMenuScreen.css"/>
		<!--script src="http://jserrlog.appspot.com/jserrlog.js"></script-->
		<!--script src="ext/stacktrace-min-0.4.js"></script-->
		<!--script src="js/debugConsole.js"></script-->
		<script src="ext/lodash.min.js"></script>
		<script src="ext/imgpreload.js"></script>
		<script src="ext/queryString.js"></script>
		<script src="ext/q.min.js"></script>
		<!--script src="http://cdnjs.cloudflare.com/ajax/libs/zepto/1.0/zepto.min.js"></script-->
		<script src="ext/zepto-1.0.min.js"></script>
		<script src="ext/zepto-touch-1.0.js"></script>
		<script src="ext/gal.js"></script>
		<script src="ext/i18next-1.6.3.min.js"></script>
		<script src="SDK/TGH5.min.js" type="text/javascript"></script>
		<!--<script src="js/dialogMenu.js"></script> -->
		<script src="js/game.js"></script>
		<script src="js/dialogMenu.js"></script>
		<script src="js/mainMenuScreen.js"></script>
		<script src="js/score.js"></script>
		<script src="js/blobCollection.js"></script>
		<script src="js/tilesEventProcessor.js"></script>
		<script src="js/spriteSheet.js"></script>
		<script src="js/mapScreen.js"></script>
		<script src="js/levelAnimation.js"></script>
		<script src="js/loadingScreen.js"></script>
		<script src="js/canvasUtil.js"></script>
		<script src="js/powerUp.js"></script>
		<script src="js/bonusFrenzy.js"></script>
		<script src="js/bubbleTip.js"></script>
		<script src="js/audioPlayer.js"></script>
		<script src="js/priorityQueue.js"></script>
		
		<script>
			var sdkApi;
			function loadGame(){
				if( typeof jsErrLog !== 'undefined' ) {
						jsErrLog.debugMode = false;
						jsErrLog.info = "Galapago debugging";                
				}
				TGH5.Api.init("Galapago", {supportedLanguages: ["en", "ru", "es", "fr", "de"]}, { sdkHome: "SDK/" }).done(function (api) {
					sdkApi = api;
			        // SDK successfully initialized
			        api.preferredLanguage().always(function (language) {
				        /* Update the UI to use the selected language */
				        i18n.init({ lng: 'en' , fallbackLng: 'en'});
				    });
			    	ScreenLoader.init();
			    }).fail(function (error) {
			        console.log(error);
			    });
			}
		</script>
	</head>
	
	<body onload = "loadGame()">
		<div id="debug-console"></div>

		<div id="canvas-main" style="">
			<canvas id="layer-background" class="game-layer" style="z-index: 1;" tabindex="1"></canvas>
			<canvas id="layer-grid" class="game-layer" style="z-index: 2;" tabindex="2"></canvas>
			<canvas id="layer-gold" class="game-layer" style="z-index: 3;" tabindex="3"></canvas>
			<canvas id="layer-creature" class="game-layer" style="z-index: 4;" tabindex="4"></canvas>
			<canvas id="layer-danger-bar" class="game-layer" style="z-index: 5;" tabindex="5"></canvas>
			<canvas id="layer-power-up" class="game-layer" style="z-index: 6;" tabindex="6"></canvas>
			<canvas id="layer-map" class="game-layer" style="z-index: 7;" tabindex="7" width="1280" height="670"></canvas>
			<ul id="map-nav">
			<li><img id="menu-map" class="nav-button" src="res/img/map-screen/button_menu_map.png" width="145" height"49"/></li>
			<li><img id="play-map" class="nav-button" src="res/img/map-screen/button_play_map.png" width="145" height"49"/></li>
			<li><img id="quit-map" class="nav-button" src="res/img/map-screen/button_quit_map.png" width="145" height"49"/></li>
			<li><img id="reset-map" class="nav-button" src="res/img/map-screen/button_reset_map.png" width="145" height"49"/></li>
			<li><img id="start-next-map" class="nav-button" src="res/img/map-screen/button_start_map.png" width="145" height"49"/></li>
			</ul>
			<canvas id="layer-map-other-animation" class="game-layer" style="z-index: 8;" tabindex="8"></canvas>
			<canvas id="layer-map-animation" class="game-layer" style="z-index: 9;" tabindex="9"></canvas>
		</div>

		<div id="main-menu-screen">
			<div id="button-change-player">
				<span id="hello-player">Hello Tim!</span>
				<span id="click-here">Click here to change player</span>
			</div>
			<div id="button-timed" class="main-menu-mode"></div>
			<div id="button-relaxed" class="main-menu-mode"></div>
			<table id="main-menu-button-group">
				<tr>
					<td id="button-how-to-play" class="main-menu-button">How To Play</td>
					<td id="button-top-scores" class="main-menu-button">Top Scores</td>
				</tr>
				<tr>
					<td id="button-set-language" class="main-menu-button">Set Language
					</td>
			<td id="button-quit" class="main-menu-button">Quit</td>
			</tr>
			</table>

			<ul class="galapago-drop-down">
				<li>English</li>
				<li>French</li>
				<li>German</li>
				<li>Russian</li>
				<li>Spanish</li>
			</ul>
		</div>

		<div id="dialog-leaderboards" class="overlay2">
			<div class="dialog-title" data-i18n="Dialog Leaderboards.Title">Top Scores</div>
			<div class="dialog-content">
				<!--div class="button-big" data-i18n="Dialog Leaderboards.Timed">Timed</div-->
				<table>
					<caption class="button-big" data-i18n="Dialog Leaderboards.OptionTimed">Timed</caption>
					<thead>
						<tr><th>Rank</th><th>Name</th><th>Score</th></tr>
					</thead>
					<tbody>
						<tr><td>1</td><td>Yaely</td><td>45367</td></tr>
						<tr><td>2</td><td>Anat</td><td>34897</td></tr>
						<tr><td>3</td><td>&nbsp;</td><td>&nbsp;</td></tr>
						<tr><td>4</td><td>&nbsp;</td><td>&nbsp;</td></tr>
						<tr><td>5</td><td>&nbsp;</td><td>&nbsp;</td></tr>
						<tr><td>6</td><td>&nbsp;</td><td>&nbsp;</td></tr>
						<tr><td>7</td><td>&nbsp;</td><td>&nbsp;</td></tr>
						<tr><td>8</td><td>&nbsp;</td><td>&nbsp;</td></tr>
						<tr><td>9</td><td>&nbsp;</td><td>&nbsp;</td></tr>
						<tr><td>10</td><td>&nbsp;</td><td>&nbsp;</td></tr>
					</tbody>
				</table>
				<table>
					<caption class="button-big" data-i18n="Dialog Leaderboards.OptionRelaxed">Relaxed</caption>
					<thead>
						<tr><th>Rank</th><th>Name</th><th>Score</th></tr>
					</thead>
					<tbody>
						<tr><td>1</td><td>Yaely</td><td>95367</td></tr>
						<tr><td>2</td><td>Anat</td><td>64897</td></tr>
						<tr><td>3</td><td>&nbsp;</td><td>&nbsp;</td></tr>
						<tr><td>4</td><td>&nbsp;</td><td>&nbsp;</td></tr>
						<tr><td>5</td><td>&nbsp;</td><td>&nbsp;</td></tr>
						<tr><td>6</td><td>&nbsp;</td><td>&nbsp;</td></tr>
						<tr><td>7</td><td>&nbsp;</td><td>&nbsp;</td></tr>
						<tr><td>8</td><td>&nbsp;</td><td>&nbsp;</td></tr>
						<tr><td>9</td><td>&nbsp;</td><td>&nbsp;</td></tr>
						<tr><td>10</td><td>&nbsp;</td><td>&nbsp;</td></tr>
					</tbody>
				</table>
				<ul class="vertical-button-nav">
					<li id="option-close" data-i18n="Dialog Leaderboards.OptionClose" class="button-big button-big-hilight">Back to main menu</li>
				</ul>
			</div>
			<div class="vertical-align-helper"></div><!-- see http://jsfiddle.net/kizu/7Fewx/ -->
		</div>
		
		<div id="dialog-quit" class="overlay2">
			<div class="dialog-content">
				<span data-i18n="Dialog Quit.Title" style="width: 360px; text-align: center">Your game will be saved, are you sure you want to quit the game?</span>
				<ul class="vertical-button-nav">
					<li id="option-yes" data-i18n="Dialog Quit.OptionYes" class="button-huge button-huge-hilight">Yes</li>
					<li id="option-no" data-i18n="Dialog Quit.OptionNo" class="button-huge">No</li>
				</ul>
			</div>
			<div class="vertical-align-helper"></div><!-- see http://jsfiddle.net/kizu/7Fewx/ -->
		</div>

		<div id="dialog-game-menu" class="overlay2">
			<div class="dialog-title" data-i18n="Dialog Game Menu.Title">Menu</div>
			<div class="dialog-content">
				<ul class="vertical-button-nav">
					<li id="option-continue-playing" data-i18n="Dialog Game Menu.OptionContinuePlaying" class="button-huge button-huge-hilight">Continue Playing</li>
					<li id="option-main-menu" data-i18n="Dialog Game Menu.OptionMainMenu" class="button-huge">To the Main Menu</li>
					<li id="option-new-game" data-i18n="Dialog Game Menu.OptionNewGame" class="button-huge">New Game</li>
					<li id="option-how-to-play" data-i18n="Dialog Game Menu.OptionHowToPlay" class="button-huge">How to play</li>
					<li id="option-options" data-i18n="Dialog Game Menu.OptionOptions" class="button-huge">Options</li>
				</ul>
			</div>
			<div class="vertical-align-helper"></div><!-- see http://jsfiddle.net/kizu/7Fewx/ -->
		</div>
		
		<div id="dialog-time-out" class="overlay2">
			<div class="dialog-title" data-i18n="Dialog Time Out.Title">Out of Time</div>
			<div class="dialog-content">
				<span data-i18n="Dialog Time Out.BodyText">
					<p>Don't despair, Galapago's creatures are rooting for you!<p/>
					<p>Play at your own pace in relaxed mode<p/>
					<p>Final Score: <span id="final-score">43200</span><p/>
				</span>
				<ul class="vertical-button-nav">
					<li id="option-close" data-i18n="Dialog Time Out.OptionClose" class="button-medium button-medium-hilight">Close</li>
				</ul>
			</div>
			<div class="vertical-align-helper"></div><!-- see http://jsfiddle.net/kizu/7Fewx/ -->
		</div>
		<div id="dialog-game-over" class="overlay2">
			<div class="dialog-title" data-i18n="Dialog Game Over.Title">Game Over</div>
			<div class="dialog-content">
				<ul class="vertical-button-nav">
					<li id="option-close" data-i18n="Dialog Game Over.OptionClose" class="button-medium button-medium-hilight">Close</li>
				</ul>
			</div>
			<div class="vertical-align-helper"></div><!-- see http://jsfiddle.net/kizu/7Fewx/ -->
		</div>
		
		<div id="dialog-level-won" class="overlay2">
			<div class="dialog-title" data-i18n="Dialog Level Won.Title">Level Won!</div>
			<div class="dialog-content">
				<span data-i18n="Dialog Level Won.NicelyPlayed">Nicely played,<br/>you are uncovering Galapago's mysteries.</span>
				<table>
					<tr><th>Level</th><td id="level"></td></tr>
					<tr><th>Bonus Frenzy</th><td id="bonusFrenzy"></td></tr>
					<tr><th>Bonus Points</th><td id="bonusPoints"></td></tr>
					<tr><th>Time Bonus</th><td id="timeBonus"></td></tr>
					<tr><th>Level Score</th><td id="levelScore"></td></tr>
					<tr><th>Score</th><td id="score"></td></tr>
				</table>
				<ul class="vertical-button-nav">
					<li id="option-close" data-i18n="Dialog Level Won.OptionClose" class="button-medium button-medium-hilight">Close</li>
				</ul>
			</div>
			<div class="vertical-align-helper"></div><!-- see http://jsfiddle.net/kizu/7Fewx/ -->
		</div>
		
		<div id="dialog-you-won" class="overlay2">
			<div class="dialog-title" data-i18n="Dialog You Won.Title">You Won!</div>
			<div class="dialog-content">
				<span data-i18n="Dialog You Won.BodyText">
					Congratulations!<br/>
					You've collected all of Galapago's
					magical creatures and freed them forever! Now the island and its
					golden treasures belong to you;
					explore Galapago whenever you like.<br/>
					The creatures of Galapago are forever grateful to you, and will bring
					peace and prosperity for the rest of your days.<br/>
					Final Score: <span id="finalScore"></span>
				</span>
				<ul class="vertical-button-nav">
					<li id="option-close" data-i18n="Dialog Time Out.OptionClose" class="button-medium button-medium-hilight">Close</li>
				</ul>
			</div>
			<div class="vertical-align-helper"></div><!-- see http://jsfiddle.net/kizu/7Fewx/ -->
		</div>
		
		<div id="dialog-new-game" class="overlay2">
			<div class="dialog-content">
				<span data-i18n="Dialog New Game.BodyText">
					Do you want<br/>to start a new game?
				</span>
				<ul class="vertical-button-nav">
					<li id="option-yes" data-i18n="Dialog New Game.OptionYes" class="button-huge ">Yes</li>
					<li id="option-no" data-i18n="Dialog New Game.OptionNo" class="button-huge button-huge-hilight">No</li>
				</ul>
			</div>
			<div class="vertical-align-helper"></div><!-- see http://jsfiddle.net/kizu/7Fewx/ -->
		</div>	
		
		<div id="dialog-reset-game" class="overlay2">
			<div class="dialog-title" data-i18n="Dialog Reset Game.Title">Warning!</div>
			<div class="dialog-content">
				<span data-i18n="Dialog Reset Game.Body Text">
					<p>Resetting the map will erase your progress and and will start a new game!</p>
					<p>Do you wish to reset the map?</p>
				</span>
				<ul class="vertical-button-nav">
					<li id="option-no" data-i18n="Dialog Reset Game.No" class="button-medium button-medium-hilight">No</li>
					<li id="option-yes" data-i18n="Dialog Reset Game.Yes" class="button-medium">Yes</li>
				</ul>
			</div>
			<div class="vertical-align-helper"></div><!-- see http://jsfiddle.net/kizu/7Fewx/ -->
		</div>
		
		<div id="bubbleTip" class="bubbleTip">
		</div>

		<div id="dialog-help" class="overlay2">
			<div class="dialog-title" data-i18n="Dialog Help.Title">How to Play</div>
			<div class="dialog-content">
				<div id="help-text-scroll">
					<span data-i18n="Dialog Help.Body Text">
						<p>For Terms &amp; Conditions, Privacy Policy and Support go to <a href="http://www.GameTreeTV.com">www.GameTreeTV.com</a>.</p>
						<h3>OBJECT</h3>
						<p>Match and collect beautiful island creatures in this unforgettable journey. Watch your collection turn to gold as you travel from beach to jungle to volcano… reach the top before it erupts and win the ultimate treasure! Choose your difficulty and your destiny by selecting your own path around the island -- you'll lose yourself in GALAPAGO's addictive gameplay and beautiful settings.</p>
						<h3>NAVIGATING GALAPAGO</h3>
						<p>To play a level just select any tile on the map.</p>
						<p>New levels will unlock once you win a level.</p>
						<p>Remember that camp fires appear on levels already completed.</p>
						<h3>HOW TO PLAY</h3>
						<p>Swap adjacent creatures vertically or horizontally to match them.</p>
						<h3>GOLD TILES</h3>
						<p>You must make matches over the gold tiles in order to complete the board.</p>
						<h3>LOCKED TILE</h3>
						<p>These tricky tiles have a creature locked inside. They can't be moved, but you can use them in a match to clear them off the board.</p>
						<h3>COCOON TILE</h3>
						<p>Cocoon Tiles can't be moved, and can't be matched – but matching three or more tiles adjacent to a Cocoon Tile will wake it up and clear it off your board.</p>
						<h3>WINNING THE LEVEL</h3>
						<p>Clear the board of all the items in the collection key at the bottom of the board.</p>
						<p>A checkmark indicates that the goal is completed.</p>
						<p>The numbers show how many of each is left.</p>
						<h3>BONUS FRENZY</h3>
						<p>When you win a level, some creatures will flee the board - catch them using the arrow keys to charge up your powerups on the next level!</p>
						<h3>FLIP-FLOP POWERUP</h3>
						<p>Make multiple match combos to turn on this powerup!</p>
						<p>The Flip-Flop lets you swap two creatures anywhere on the board - they don't need to be adjacent!</p>
						<h3>FIREPOWER POWERUP</h3>
						<p>Make multiple match combos to turn on Firepower!</p>
						<p>Use Firepower to select a creature anywhere on the board and make it disappear.</p>
						<h3>SHUFFLER POWERUP</h3>
						<p>Make multiple match combos to turn on the Shuffler!</p>
						<p>Use Shuffler to reshuffle all the creatures on the board.</p>
						<h3>LIGHTNING CRITTERS</h3>
						<p>Be on the lookout for the powerful Lightning Critters!</p>
						<p>Match three or more Lightning Critters and clear an entire row!</p>
						<h3>SUPER MATCH FRIEND</h3>
						<p>Use your Super Match Friend to clear all of one creature off the board!</p>

						<p>I-play is a trademark and trading name of Oberon Media, Inc. and its subsidiaries. &copy; 2008 Oberon Media. All Rights Reserved.</p>
						<p>&copy; TransGaming Interactive Corp. ALL RIGHTS RESERVED.</p>
					</span>
				</div>

				<script>
				function updateScrollDivPages() {
					var scrollDiv, currentPage, pageCount;
					scrollDiv = $('#help-text-scroll')[0];
					pageCount = Math.ceil( scrollDiv.scrollHeight / scrollDiv.clientHeight );
					currentPage = Math.floor( (scrollDiv.scrollTop + scrollDiv.clientHeight) / scrollDiv.scrollHeight * pageCount );
					$('#current-page').html(currentPage);
					$('#page-count').html(pageCount);
				}
				</script>

				<p>Page <span id="current-page"></span> of <span id="page-count"></span> </p>
				<ul class="vertical-button-nav">
					<li id="option-scroll" data-i18n="Dialog Help.ScrollDown" class="button-medium button-medium-hilight">Scroll</li>
					<li id="option-close" data-i18n="Dialog Help.Close" class="button-medium">Close</li>
				</ul>
			</div>
			<div class="vertical-align-helper"></div><!-- see http://jsfiddle.net/kizu/7Fewx/ -->	
		</div>

	</body>
</html>