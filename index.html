<!DOCTYPE html>
<html lang="en">
	<head>
		<script>document.writeln('<title>' + document.domain + ': Galapago</title>');</script>
		<link rel="stylesheet" type="text/css" href="css/debugConsole.css"/>
		<link rel="stylesheet" type="text/css" href="css/global.css"/>
		<!--script src="http://jserrlog.appspot.com/jserrlog.js"></script-->
		<!--script src="ext/stacktrace-min-0.4.js"></script-->
		<!--script src="js/debugConsole.js"></script-->
		<script src="ext/lodash.min.js"></script>
		<script src="ext/imgpreload.js"></script>
		<!--script src="ext/queryString.js"></script-->
		<script src="ext/q.min.js"></script>
		<!--script src="http://cdnjs.cloudflare.com/ajax/libs/zepto/1.0/zepto.min.js"></script-->
		<script src="ext/zepto-1.0.min.js"></script>
		<script src="ext/zepto-touch-1.0.js"></script>
		<!--script src="ext/imageFilters.js"></script-->
		<script src="ext/gal.js"></script>
		<!--<script src="js/dialogMenu.js"></script> -->
		<script src="js/dialogMenu2.js"></script>
		<script src="js/score.js"></script>
		<script src="js/blobCollection.js"></script>
		<script src="js/tilesEventProcessor.js"></script>
		<script src="js/spriteSheet.js"></script>
		<script src="js/mapScreen.js"></script>
		<script src="js/game.js"></script>
		<script src="js/levelAnimation.js"></script>
		<script src="js/loadingScreen.js"></script>
		<script src="js/canvasUtil.js"></script>
		<script src="js/powerUp.js"></script>
		<script src="js/bonusFrenzy.js"></script>
		<script src="js/bubbleTip.js"></script>
		<script src="js/audioPlayer.js"></script>
		<script src="js/priorityQueue.js"></script>
		<script src="ext/i18next-1.6.3.min.js"></script>
		<script src="SDK/TGH5.min.js" type="text/javascript"></script>
		
		<script>
			var sdkApi;
			function loadGame(){
				var gameMode = 'MODE_TIMED';
				if( typeof jsErrLog !== 'undefined' ) {
						jsErrLog.debugMode = false;
						jsErrLog.info = "Galapago debugging";                
				}
				TGH5.Api.init("Galapago", {supportedLanguages: ["en", "ru", "es", "fr", "de"]}, { sdkHome: "SDK/" }).done(function (api) {
					sdkApi = api;
			        // SDK successfully initialized
			        api.preferredLanguage().always(function (language) {
				        /* Update the UI to use the selected language */
				        i18n.init({ lng: 'en' , fallbackLng: 'en'});
				    });
				    //api.requestModalAd("preRoll").done(function(){
					    if(api.inDemoMode()){
					    	ScreenLoader.init(gameMode);
					    }else{
					    	ScreenLoader.init(gameMode);
					    }
					//});
			    }).fail(function (error) {
			        console.log(error);
			    });
			}
		</script>
	</head>
	
	<body onload = "loadGame()">
		<div id="debug-console"></div>

		<div id="canvas-main" style="">
			<canvas id="layer-background" class="game-layer" style="z-index: 1;" tabindex="1"></canvas>
			<canvas id="layer-grid" class="game-layer" style="z-index: 2;" tabindex="2"></canvas>
			<canvas id="layer-gold" class="game-layer" style="z-index: 3;" tabindex="3"></canvas>
			<canvas id="layer-creature" class="game-layer" style="z-index: 4;" tabindex="4"></canvas>
			<canvas id="layer-danger-bar" class="game-layer" style="z-index: 5;" tabindex="5"></canvas>
			<canvas id="layer-power-up" class="game-layer" style="z-index: 6;" tabindex="6"></canvas>
			<canvas id="layer-map" class="game-layer" style="z-index: 7;" tabindex="7" width="1280" height="670"></canvas>
			<canvas id="layer-map-other-animation" class="game-layer" style="z-index: 8;" tabindex="8"></canvas>
			<canvas id="layer-map-animation" class="game-layer" style="z-index: 9;" tabindex="9"></canvas>
		</div>

		<ul id="map-nav">
		<li><img id="menu-map" class="nav-button" src="res/img/map-screen/button_menu_map.png" width="145" height"49"/></li>
		<li><img id="play-map" class="nav-button" src="res/img/map-screen/button_play_map.png" width="145" height"49"/></li>
		<li><img id="quit-map" class="nav-button" src="res/img/map-screen/button_quit_map.png" width="145" height"49"/></li>
		<li><img id="reset-map" class="nav-button" src="res/img/map-screen/button_reset_map.png" width="145" height"49"/></li>
		<li><img id="start-next-map" class="nav-button" src="res/img/map-screen/button_start_map.png" width="145" height"49"/></li>
		</ul>
		
		<div id="dialog-quit" class="overlay2">
			<div class="dialog-content">
				<span data-i18n="Dialog Quit.Title" style="width: 360px; text-align: center">Your game will be saved, are you sure you want to quit the game?</span>
				<ul class="vertical-button-nav">
					<li id="option-yes" data-i18n="Dialog Quit.OptionYes" class="button-huge button-huge-hilight">Yes</li>
					<li id="option-no" data-i18n="Dialog Quit.OptionNo" class="button-huge">No</li>
				</ul>
			</div>
			<div class="vertical-align-helper"></div><!-- see http://jsfiddle.net/kizu/7Fewx/ -->
		</div>

		<div id="dialog-game-menu" class="overlay2">
			<div class="dialog-title" data-i18n="Dialog Game Menu.Title">Menu</div>
			<div class="dialog-content">
				<ul class="vertical-button-nav">
					<li id="option-continue-playing" data-i18n="Dialog Game Menu.OptionContinuePlaying" class="button-huge button-huge-hilight">Continue Playing</li>
					<li id="option-main-menu" data-i18n="Dialog Game Menu.OptionMainMenu" class="button-huge">To the Main Menu</li>
					<li id="option-new-game" data-i18n="Dialog Game Menu.OptionNewGame" class="button-huge">New Game</li>
					<li id="option-how-to-play" data-i18n="Dialog Game Menu.OptionHowToPlay" class="button-huge">How to play</li>
					<li id="option-options" data-i18n="Dialog Game Menu.OptionOptions" class="button-huge">Options</li>
				</ul>
			</div>
			<div class="vertical-align-helper"></div><!-- see http://jsfiddle.net/kizu/7Fewx/ -->
		</div>
		
		<div id="dialog-time-out" class="overlay2">
			<div class="dialog-title" data-i18n="Dialog Time Out.Title">Out of Time</div>
			<div class="dialog-content">
				<span data-i18n="Dialog Time Out.BodyText">
					<p>Don't despair, Galapago's creatures are rooting for you!<p/>
					<p>Play at your own pace in relaxed mode<p/>
					<p>Final Score: <span id="final-score">43200</span><p/>
				</span>
				<ul class="vertical-button-nav">
					<li id="option-close" data-i18n="Dialog Time Out.OptionClose" class="button-medium button-medium-hilight">Close</li>
				</ul>
			</div>
			<div class="vertical-align-helper"></div><!-- see http://jsfiddle.net/kizu/7Fewx/ -->
		</div>
		<div id="dialog-game-over" class="overlay2">
			<div class="dialog-title" data-i18n="Dialog Game Over.Title">Game Over</div>
			<div class="dialog-content">
				<ul class="vertical-button-nav">
					<li id="option-close" data-i18n="Dialog Game Over.OptionClose" class="button-medium button-medium-hilight">Close</li>
				</ul>
			</div>
			<div class="vertical-align-helper"></div><!-- see http://jsfiddle.net/kizu/7Fewx/ -->
		</div>
		
		<div id="dialog-level-won" class="overlay2">
			<div class="dialog-title" data-i18n="Dialog Level Won.Title">Level Won!</div>
			<div class="dialog-content">
				<span data-i18n="Dialog Level Won.NicelyPlayed">Nicely played,<br/>you are uncovering Galapago's mysteries.</span>
				<table>
					<tr><th>Level</th><td id="level"></td></tr>
					<tr><th>Bonus Frenzy</th><td id="bonusFrenzy"></td></tr>
					<tr><th>Bonus Points</th><td id="bonusPoints"></td></tr>
					<tr><th>Time Bonus</th><td id="timeBonus"></td></tr>
					<tr><th>Level Score</th><td id="levelScore"></td></tr>
					<tr><th>Score</th><td id="score"></td></tr>
				</table>
				<ul class="vertical-button-nav">
					<li id="option-close" data-i18n="Dialog Level Won.OptionClose" class="button-medium button-medium-hilight">Close</li>
				</ul>
			</div>
			<div class="vertical-align-helper"></div><!-- see http://jsfiddle.net/kizu/7Fewx/ -->
		</div>
		
		<div id="dialog-you-won" class="overlay2">
			<div class="dialog-title" data-i18n="Dialog You Won.Title">You Won!</div>
			<div class="dialog-content">
				<span data-i18n="Dialog You Won.BodyText">
					Congratulations!<br/>
					You've collected all of Galapago's
					magical creatures and freed them forever! Now the island and its
					golden treasures belong to you;
					explore Galapago whenever you like.<br/>
					The creatures of Galapago are forever grateful to you, and will bring
					peace and prosperity for the rest of your days.<br/>
					Final Score: <span id="finalScore"></span>
				</span>
				<ul class="vertical-button-nav">
					<li id="option-close" data-i18n="Dialog Time Out.OptionClose" class="button-medium button-medium-hilight">Close</li>
				</ul>
			</div>
			<div class="vertical-align-helper"></div><!-- see http://jsfiddle.net/kizu/7Fewx/ -->
		</div>
		
		<div id="bubbleTip" class="bubbleTip">
		</div>

	</body>
</html>