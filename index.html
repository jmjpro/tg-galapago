<!DOCTYPE html>
<html lang="en">
	<head>
		<script>document.writeln('<title>' + document.domain + ': Galapago</title>');</script>
		<link rel="stylesheet" type="text/css" href="css/debugConsole.css"/>
		<link rel="stylesheet" type="text/css" href="css/global.css"/>
		<!--script src="http://jserrlog.appspot.com/jserrlog.js"></script-->
		<!--script src="ext/stacktrace-min-0.4.js"></script-->
		<!--script src="js/debugConsole.js"></script-->
		<script src="ext/lodash.min.js"></script>
		<script src="ext/imgpreload.js"></script>
		<!--script src="ext/queryString.js"></script-->
		<script src="ext/q.min.js"></script>
		<!--script src="http://cdnjs.cloudflare.com/ajax/libs/zepto/1.0/zepto.min.js"></script-->
		<script src="ext/zepto-1.0.min.js"></script>
		<script src="ext/zepto-touch-1.0.js"></script>
		<!--script src="ext/imageFilters.js"></script-->
		<script src="ext/gal.js"></script>
		<script src="js/dialogMenu.js"></script>
		<script src="js/score.js"></script>
		<script src="js/blobCollection.js"></script>
		<script src="js/tilesEventProcessor.js"></script>
		<script src="js/spriteSheet.js"></script>
		<script src="js/dialogMenu.js"></script>
		<script src="js/mapScreen.js"></script>
		<script src="js/game.js"></script>
		<script src="js/levelAnimation.js"></script>
		<script src="js/loadingScreen.js"></script>
		<script src="js/canvasUtil.js"></script>
		<script src="js/powerUp.js"></script>
		<script src="js/bonusFrenzy.js"></script>
		<script src="js/audioPlayer.js"></script>
		<script src="js/priorityQueue.js"></script>
		<script src="ext/i18next-1.6.3.min.js"></script>
		<script src="SDK/TGH5.min.js" type="text/javascript"></script>
		
		<script>
			var sdkApi;
			function loadGame(){
				var gameMode = 'MODE_TIMED';
				if( typeof jsErrLog !== 'undefined' ) {
						jsErrLog.debugMode = false;
						jsErrLog.info = "Galapago debugging";                
				}
				TGH5.Api.init("Galapago", {supportedLanguages: ["en", "ru", "es", "fr", "de"]}, { sdkHome: "SDK/" }).done(function (api) {
					sdkApi = api;
			        // SDK successfully initialized
			        api.preferredLanguage().always(function (language) {
				        /* Update the UI to use the selected language */
				        i18n.init({ lng: 'en' , fallbackLng: 'en'});
				    });
				    //api.requestModalAd("preRoll").done(function(){
					    if(api.inDemoMode()){
					    	ScreenLoader.init(gameMode);
					    }else{
					    	ScreenLoader.init(gameMode);
					    }
					//});
			    }).fail(function (error) {
			        console.log(error);
			    });
			}
		</script>
	</head>
	
	<body onload = "loadGame()">
		<div id="debug-console"></div>

		<div id="canvas-main" style="">
			<canvas id="layer-background" class="game-layer" style="z-index: 1;" tabindex="1"></canvas>
			<canvas id="layer-grid" class="game-layer" style="z-index: 2;" tabindex="2"></canvas>
			<canvas id="layer-gold" class="game-layer" style="z-index: 3;" tabindex="3"></canvas>
			<canvas id="layer-creature" class="game-layer" style="z-index: 4;" tabindex="4"></canvas>
			<canvas id="layer-danger-bar" class="game-layer" style="z-index: 5;" tabindex="5"></canvas>
			<canvas id="layer-power-up" class="game-layer" style="z-index: 6;" tabindex="6"></canvas>
			<canvas id="layer-map" class="game-layer" style="z-index: 7;" tabindex="7" width="1280" height="670"></canvas>
			<canvas id="layer-map-other-animation" class="game-layer" style="z-index: 8;" tabindex="8"></canvas>
			<canvas id="layer-map-animation" class="game-layer" style="z-index: 9;" tabindex="9"></canvas>
		</div>

		<ul id="map-nav">
		<li><img id="menu-map" class="nav-button" src="res/img/map-screen/button_menu_map.png" width="145" height"49"/></li>
		<li><img id="play-map" class="nav-button" src="res/img/map-screen/button_play_map.png" width="145" height"49"/></li>
		<li><img id="quit-map" class="nav-button" src="res/img/map-screen/button_quit_map.png" width="145" height"49"/></li>
		<li><img id="reset-map" class="nav-button" src="res/img/map-screen/button_reset_map.png" width="145" height"49"/></li>
		<li><img id="start-next-map" class="nav-button" src="res/img/map-screen/button_start_map.png" width="145" height"49"/></li>
		</ul>

		<div id="game-menu" class="overlay" tabindex="9">
			<div id="gmenu">
				<ul class="menu">
					<li><a href="#" id='Option1' data-i18n="Game Menu Screen.Option1" onclick="gameMenu.hide(true); Galapago.level.board.displayMenuButton(false);"></a></li>
					<li><a href="#" id='Option2' data-i18n="Game Menu Screen.Option2" onclick="gameMenu.quitGame();event.stopPropagation();"></a></li>
					<li id='Option3' data-i18n="Game Menu Screen.Option3" ></li>
					<li id='Option4' data-i18n="Game Menu Screen.Option4" ></li>
					<li id='Option5' data-i18n="Game Menu Screen.Option5" >Option</li>
				</ul>
			</div>			
		</div>

		<div id="main-menu" class="overlay">
			<div>
				<!--img src="game-logo.png"/-->
				<div id='timed'>Timed</div>
				<div id='relaxed'>Relaxed</div>
				<div id='player'>Hello Tim! Click here to change the player</div>       
				<div>
					<div>Options</div>
					<div>How To Play</div>
					<div>Top Scores</div>
					<div><a href="#" onclick="mainMenu.hide();">Quit</a></div>
				</div>
			</div>
		</div>

		<div id="dialog-quit" class="overlay">
			<div id="dialog-quit-container">
				<span data-i18n="Dialog Quit.Title" style="width: 360px; text-align: center"></span>
				<ul class="vertical-button-nav">
					<li id="option-yes" data-i18n="Dialog Quit.OptionYes" class="button-huge button-huge-hilight"></li>
					<li id="option-no" data-i18n="Dialog Quit.OptionNo" class="button-huge"></li>
				</ul>
			</div>
		</div>

		<script>
			var gameMenu, mainMenu;
			gameMenu = new DialogMenu('layer-grid', 'game-menu');
			mainMenu = new DialogMenu('layer-map', 'main-menu');
			mainMenu = new DialogMenu('layer-map', 'dialog-quit');
		</script>
	</body>
</html>