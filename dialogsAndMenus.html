<html>
<head>
	<meta content="text/html;charset=utf-8" http-equiv="Content-Type">
	<meta content="utf-8" http-equiv="encoding">
	<link rel="stylesheet" type="text/css" href="css/global.css"/>
	<script src="ext/zepto-1.0.min.js"></script>
	<script src="ext/lodash.min.js"></script>
	<script src="ext/gal.js"></script>
	<script src="ext/i18next-1.6.3.min.js"></script>
	<script src="../SDK/TGH5.min.js" type="text/javascript"></script>
	<script src="js/loadingScreen.js"></script>
	<script src="js/dialogMenu.js"></script>
	<script src="js/dialogHelp.js"></script>
	<script src="js/mapScreen.js"></script>
	<script>
	var Galapago = "";
	var dialogMenu;
	var galapagoVersion = 'Ver. 1.3';

	function loadGame() {
		i18n.init({ lng: 'en' , fallbackLng: 'en'});
		var testClass = new TestClass();
		testClass.registerEventHandlers();
		TGH5.Api.init("Galapago", {supportedLanguages: ["en", "ru", "es", "fr", "de"]}, { sdkHome: "../SDK/" }).done(function (api) {
					sdkApi = api;
			        // SDK successfully initialized
			        api.preferredLanguage().always(function (language) {
				        /* Update the UI to use the selected language */
				        i18n.init({ lng: 'en' , fallbackLng: 'en'});
				    });
			    	LoadingScreen.init();
			    }).fail(function (error) {
			        console.log(error);
			    });
	}

	LoadingScreen.init = function() {
		this.gal = new GameAssetLoader('js/loadingScreen.manifest');
		this.registerEvent();
		this.gal.init(function() {
			LoadingScreen.gal.download('dialogs-and-menus-testing');
		});
	};

	LoadingScreen.registerEvent = function() {
		LoadingScreen.gal.onLoaded('dialogs-and-menus-testing', function(result) {
			if (result.success) {
				var mapScreen = new MapScreen();
				mapScreen.registerEventHandlers();
			}
		});
	};

	function TestClass() {
		this.level = null;
	}
	TestClass.prototype.displayMenuButton = function(isDisplay) {};
	TestClass.prototype.display = function() {};

	TestClass.prototype.registerEventHandlers = function() {
		window.onkeydown = function(evt) {
			switch( evt.keyCode ) {
			case 13: // enter
				alert('You hit enter');
				evt.stopPropagation();
				evt.preventDefault();
				break;
			}
		}
	}
	</script>

	<style>
	#demo-nav {
		position: absolute;
		left: 0px;
		top: 0px;
		/*display: inline-block;*/
		z-index: 0;
		color: white;
		text-align: left;
	}

	#demo-nav a:link {color: blue;}
	#demo-nav a:visited {color: yellow;}
	#demo-nav a:hover {color: blue;}
	#demo-nav a:active {color: red;}

	#test-layer {
		display: inline-block;
		z-index: -1;
		width: 100%;
		height: 100%;
		background: url('res/img/screen-map/Map.jpg') no-repeat top left;
	}
	</style>
</head>
<body onLoad="loadGame()" style="text-align: center; ">
<div id="demo-nav">
<a href="#" onclick="dialogMenu = new DialogMenu('test-layer', TestClass, 'dialog-profile-create', 'keypad_cursor_letter');">Create Profile</a> |
<a href="#" onclick="dialogMenu = new DialogMenu('test-layer', TestClass, 'dialog-game-menu', 'button-huge-hilight');">Game Menu</a> |
<a href="#" onclick="dialogMenu = new DialogMenu('test-layer', TestClass, 'dialog-game-over', 'button-medium-hilight');">Game Over</a> |
<a href="#" onclick="dialogMenu = new DialogMenu('test-layer', TestClass, 'dialog-time-out', 'button-medium-hilight');">Out of Time</a> |
<a href="#" onclick="dialogMenu = new DialogMenu('test-layer', TestClass, 'dialog-you-won', 'button-medium-hilight');">You Won</a> |
<a href="#" onclick="dialogMenu = new DialogMenu('test-layer', TestClass, 'dialog-leaderboards', 'button-big-hilight', TGH5.Reporting.Page.Leaderboards);">Leaderboards</a> |
<a href="#" onclick="dialogMenu = new DialogMenu('test-layer', TestClass, 'dialog-level-won', 'button-medium-hilight');">Level Won</a> |
<a href="#" onclick="dialogMenu = new DialogMenu('test-layer', TestClass, 'dialog-loading', null);">Loading</a><br/>
<a href="#" onclick="dialogMenu = new DialogMenu('test-layer', TestClass, 'dialog-new-game', 'button-huge-hilight');">New Game</a> |
<a href="#" onclick="dialogMenu = new DialogMenu('test-layer', TestClass, 'dialog-game-options', 'button-medium-hilight');">Game Options</a> |
<a href="#" onclick="dialogMenu = new DialogMenu('test-layer', TestClass, 'dialog-profile-delete', 'button-huge-hilight');">Profile Confirm Delete</a> |
<a href="#" onclick="dialogMenu = new DialogMenu('test-layer', TestClass, 'dialog-profile-create-init', 'button-medium-hilight');">Create Profile Initial</a> |
<a href="#" onclick="dialogMenu = new DialogMenu('test-layer', TestClass, 'dialog-profile-list', 'button-huge-hilight');">Profile List</a> |
<a href="#" onclick="dialogMenu = new DialogMenu('test-layer', TestClass, 'dialog-quit', 'button-huge-hilight');">Quit</a> |
<a href="#" onclick="dialogMenu = new DialogMenu('test-layer', TestClass, 'dialog-reset-game', 'button-medium-hilight');">Reset Game</a> |
<a href="#" onclick="dialogMenu = new DialogHelp('test-layer', TestClass, 'dialog-help', 'button-medium-hilight', TGH5.Reporting.Page.Help);">Help</a>
</div>

<div id="test-layer"></div>

<ul id="map-nav">
<li><div id="button_play_map" class="nav-button" onclick="Galapago.levelMap.handleKeyboardSelect();"></div></li>
<li><div id="button_start_map" class="nav-button" onclick="Galapago.levelMap.setHotspotLevel(LevelMap.getNextLevel());Galapago.levelMap.handleKeyboardSelect();"></div></li>
<li><div id="button_reset_map" class="nav-button" onclick="window.dialog = new DialogMenu('layer-map-other-animation', Galapago.levelMap, 'dialog-reset-game', 'button-medium-hilight')"></div></li>
<li><div id="button_menu_map" class="nav-button" onclick="Galapago.levelMap.cleanupAnimationAndSound();MainMenuScreen.init('screen-map', Galapago.mapScreen);"></div></li>
<li><div id="button_quit_map" class="nav-button" onclick="window.dialog = new DialogMenu('layer-power-up', this, 'dialog-quit', 'button-huge-hilight');"></div></li>
</ul>

<div id="dialog-profile-create" class="overlay2">
	<div class="dialog-title" data-i18n="Dialog Game Menu.Title">Please enter<br/>your name</div>
	<div class="dialog-content">
		<input class="profile-name" type="text"/>
		<div id="keypad"></div>
	</div>
	<div class="vertical-align-helper"></div><!-- see http://jsfiddle.net/kizu/7Fewx/ -->
</div>

<div id="dialog-quit" class="overlay2">
	<div class="dialog-content">
		<span data-i18n="Dialog Quit.BodyText" style="width: 360px; text-align: center">Your game will be saved, are you sure you want to quit the game?</span>
		<ul class="vertical-button-nav">
			<li id="option-yes" data-i18n="Dialog Quit.OptionYes" class="button-huge button-huge-hilight">Yes</li>
			<li id="option-no" data-i18n="Dialog Quit.OptionNo" class="button-huge">No</li>
		</ul>
	</div>
	<div class="vertical-align-helper"></div><!-- see http://jsfiddle.net/kizu/7Fewx/ -->
</div>

<div id="dialog-game-menu" class="overlay2">
	<div class="dialog-title" data-i18n="Dialog Game Menu.Title">Menu</div>
	<div class="dialog-content">
		<ul class="vertical-button-nav">
			<li id="option-continue-playing" data-i18n="Dialog Game Menu.OptionContinuePlaying" class="button-huge button-huge-hilight">Continue Playing</li>
			<li id="option-main-menu" data-i18n="Dialog Game Menu.OptionMainMenu" class="button-huge">To the Main Menu</li>
			<li id="option-new-game" data-i18n="Dialog Game Menu.OptionNewGame" class="button-huge">New Game</li>
			<li id="option-how-to-play" data-i18n="Dialog Game Menu.OptionHowToPlay" class="button-huge">How to play</li>
			<li>Game Tips<div id="option-game-tips" data-i18n="Dialog Game Menu.OptionOn" class="button-regular"><img src="res/img/dialogs/arrow_left.png" class="game-option-arrow" width="37" height="27">On<img src="res/img/dialogs/arrow_right.png" class="game-option-arrow" width="37" height="27"></div></li>
		</ul>
	</div>
	<div class="vertical-align-helper"></div><!-- see http://jsfiddle.net/kizu/7Fewx/ -->
</div>

<div id="dialog-level-won" class="overlay2">
	<div class="dialog-title" data-i18n="Dialog Level Won.Title">Level Won!</div>
	<div class="dialog-content">
		<span data-i18n="Dialog Level Won.NicelyPlayed">Nicely played,<br/>you are uncovering Galapago's mysteries.</span>
		<table>
			<tr><th>Level</th><td>20800</td></tr>
			<tr><th>Bonus Frenzy</th><td>27</td></tr>
			<tr><th>Bonus Points</th><td>6750</td></tr>
			<tr><th>Time Bonus</th><td>35771</td></tr>
			<tr><th>Level Score</th><td>90442</td></tr>
			<tr><th>Score</th><td>1344154</td></tr>
		</table>
		<ul class="vertical-button-nav">
			<li id="option-close" data-i18n="Dialog Level Won.OptionClose" class="button-medium button-medium-hilight">Close</li>
		</ul>
	</div>
	<div class="vertical-align-helper"></div><!-- see http://jsfiddle.net/kizu/7Fewx/ -->
</div>

<div id="dialog-game-over" class="overlay2">
	<div class="dialog-title" data-i18n="Dialog Game Over.Title">Game Over</div>
	<div class="dialog-content">
		<ul class="vertical-button-nav">
			<li id="option-close" data-i18n="Dialog Game Over.OptionClose" class="button-medium button-medium-hilight">Close</li>
		</ul>
	</div>
	<div class="vertical-align-helper"></div><!-- see http://jsfiddle.net/kizu/7Fewx/ -->
</div>

<div id="dialog-leaderboards" class="overlay2">
	<div class="dialog-title" data-i18n="Dialog Leaderboards.Title">Top Scores</div>
	<div class="dialog-content">
		<!--div class="button-big" data-i18n="Dialog Leaderboards.Timed">Timed</div-->
		<table>
			<caption class="button-big" data-i18n="Dialog Leaderboards.Timed">Timed</caption>
			<thead>
				<tr><th>Rank</th><th>Name</th><th>Score</th></tr>
			</thead>
			<tbody>
				<tr><td>1</td><td>Yaely</td><td>45367</td></tr>
				<tr><td>2</td><td>Anat</td><td>34897</td></tr>
				<tr><td>3</td><td>&nbsp;</td><td>&nbsp;</td></tr>
				<tr><td>4</td><td>&nbsp;</td><td>&nbsp;</td></tr>
				<tr><td>5</td><td>&nbsp;</td><td>&nbsp;</td></tr>
				<tr><td>6</td><td>&nbsp;</td><td>&nbsp;</td></tr>
				<tr><td>7</td><td>&nbsp;</td><td>&nbsp;</td></tr>
				<tr><td>8</td><td>&nbsp;</td><td>&nbsp;</td></tr>
				<tr><td>9</td><td>&nbsp;</td><td>&nbsp;</td></tr>
				<tr><td>10</td><td>&nbsp;</td><td>&nbsp;</td></tr>
			</tbody>
		</table>
		<table>
			<caption class="button-big" data-i18n="Dialog Leaderboards.Relaxed">Relaxed</caption>
			<thead>
				<tr><th>Rank</th><th>Name</th><th>Score</th></tr>
			</thead>
			<tbody>
				<tr><td>1</td><td>Yaely</td><td>95367</td></tr>
				<tr><td>2</td><td>Anat</td><td>64897</td></tr>
				<tr><td>3</td><td>&nbsp;</td><td>&nbsp;</td></tr>
				<tr><td>4</td><td>&nbsp;</td><td>&nbsp;</td></tr>
				<tr><td>5</td><td>&nbsp;</td><td>&nbsp;</td></tr>
				<tr><td>6</td><td>&nbsp;</td><td>&nbsp;</td></tr>
				<tr><td>7</td><td>&nbsp;</td><td>&nbsp;</td></tr>
				<tr><td>8</td><td>&nbsp;</td><td>&nbsp;</td></tr>
				<tr><td>9</td><td>&nbsp;</td><td>&nbsp;</td></tr>
				<tr><td>10</td><td>&nbsp;</td><td>&nbsp;</td></tr>
			</tbody>
		</table>
		<ul class="vertical-button-nav">
			<li id="option-close" data-i18n="Dialog Leaderboards.OptionClose" class="button-big button-big-hilight">Back to main menu</li>
		</ul>
	</div>
	<div class="vertical-align-helper"></div><!-- see http://jsfiddle.net/kizu/7Fewx/ -->
</div>

<div id="dialog-time-out" class="overlay2">
	<div class="dialog-title" data-i18n="Dialog Time Out.Title">Out of Time</div>
	<div class="dialog-content">
		<span data-i18n="Dialog Time Out.BodyText">
			<p>Don't despair, Galapago's creatures are rooting for you!</p>
			<p>Play at your own pace in relaxed mode</p>
			<p>Final Score: <span id="final-score">43200</span></p>
		</span>
		<ul class="vertical-button-nav">
			<li id="option-close" data-i18n="Dialog Time Out.OptionClose" class="button-medium button-medium-hilight">Close</li>
		</ul>
	</div>
	<div class="vertical-align-helper"></div><!-- see http://jsfiddle.net/kizu/7Fewx/ -->
</div>

<div id="dialog-you-won" class="overlay2">
	<div class="dialog-title" data-i18n="Dialog You Won.Title">You Won!</div>
	<div class="dialog-content">
		<span data-i18n="Dialog You Won.BodyText">
			Congratulations!<br/>
			You've collected all of Galapago's
			magical creatures and freed them forever! Now the island and its
			golden treasures belong to you;
			explore Galapago whenever you like.<br/>
			The creatures of Galapago are forever grateful to you, and will bring
			peace and prosperity for the rest of your days.<br/>
			Final Score: <span id="final-score">43200</span><br/>
		</span>
		<ul class="vertical-button-nav">
			<li id="option-close" data-i18n="Dialog Time Out.OptionClose" class="button-medium button-medium-hilight">Close</li>
		</ul>
	</div>
	<div class="vertical-align-helper"></div><!-- see http://jsfiddle.net/kizu/7Fewx/ -->
</div>

<div id="dialog-loading" class="overlay2">
	<div class="dialog-content">
		<span data-i18n="Dialog You Won.BodyText">
			Loading...
		</span>
	</div>
	<div class="vertical-align-helper"></div><!-- see http://jsfiddle.net/kizu/7Fewx/ -->
</div>

<div id="dialog-new-game" class="overlay2">
	<div class="dialog-content">
		<span data-i18n="Dialog New Game.BodyText">
			Do you want<br/>to start a new game?
		</span>
		<ul class="vertical-button-nav">
			<li id="option-yes" data-i18n="Dialog New Game.OptionYes" class="button-huge button-huge-hilight">Yes</li>
			<li id="option-no" data-i18n="Dialog New Game.OptionNo" class="button-huge">No</li>
		</ul>
	</div>
	<div class="vertical-align-helper"></div><!-- see http://jsfiddle.net/kizu/7Fewx/ -->
</div>

<div id="dialog-game-options" class="overlay2">
	<div class="dialog-title" data-i18n="Dialog Game Options.Title">Options</div>
	<div class="dialog-content">
		<ul class="vertical-button-nav">
			<li id="button-game-tips" class="button-big" data-i18n="Dialog Game Options.GameTips">Game tips</li><div id="button-off" class="button-medium" data-i18n="Dialog Game Options.Off">Off</div>
			<li class="button-big" data-i18n="Dialog Game Options.Language">Language - English</li>
			<ul class="galapago-drop-down">
				<li>English</li>
				<li>French</li>
				<li>German</li>
				<li>Russian</li>
				<li>Spanish</li>
			</ul>
			<li id="option-confirm" data-i18n="Dialog Game Options.Confirm" class="button-medium button-medium-hilight">Confirm</li>
			<li id="option-cancel" data-i18n="Dialog Game Options.Cancel" class="button-medium">Cancel</li>
		</ul>
	</div>
	<div class="vertical-align-helper"></div><!-- see http://jsfiddle.net/kizu/7Fewx/ -->
</div>

<div id="dialog-profile-delete" class="overlay2">
	<div class="dialog-content">
		<span data-i18n="Dialog New Game.BodyText">
			Are you sure you want to delete this player?
		</span>
		<ul class="vertical-button-nav">
			<li id="option-yes" data-i18n="Dialog New Game.OptionYes" class="button-huge button-huge-hilight">Yes</li>
			<li id="option-no" data-i18n="Dialog New Game.OptionNo" class="button-huge">No</li>
		</ul>
	</div>
	<div class="vertical-align-helper"></div><!-- see http://jsfiddle.net/kizu/7Fewx/ -->
</div>

<div id="dialog-profile-create-init" class="overlay2">
	<div class="dialog-title" data-i18n="Dialog Profile Create Initial.Title">Please enter your name</div>
	<div class="dialog-content">
		<img src="res/img/dialogs/Profile name entering from initial state.jpg" width="266" height="279"/>
		<div id="keypad"></div>
		<ul class="vertical-button-nav">
			<li id="option-close" data-i18n="Dialog Profile Create Initial.Close" class="button-medium button-medium-hilight">Close</li>
		</ul>
	</div>
	<div class="vertical-align-helper"></div><!-- see http://jsfiddle.net/kizu/7Fewx/ -->
</div>

<div id="dialog-profile-list" class="overlay2">
	<div class="dialog-title" data-i18n="Dialog Profile List.Title">Players</div>
	<div class="dialog-content">
		<img src="res/img/dialogs/Profile_initialState.jpg" width="266" height="279"/>
		<ul class="vertical-button-nav">
			<li id="option-save" data-i18n="Dialog Profile List.Save" class="button-huge button-huge-hilight">Save changes and play<br/>with active player</li>
		</ul>
	</div>
	<div class="vertical-align-helper"></div><!-- see http://jsfiddle.net/kizu/7Fewx/ -->
</div>

<div id="dialog-reset-game" class="overlay2">
	<div class="dialog-title" data-i18n="Dialog Reset Game.Title">Warning!</div>
	<div class="dialog-content">
		<span data-i18n="Dialog Reset Game.Body Text">
			<p>Resetting the map will erase your progress and and will start a new game!</p>
			<p>Do you wish to reset the map?</p>
		</span>
		<ul class="vertical-button-nav">
			<li id="option-no" data-i18n="Dialog Reset Game.No" class="button-medium button-medium-hilight">No</li>
			<li id="option-yes" data-i18n="Dialog Reset Game.Yes" class="button-medium">Yes</li>
		</ul>
	</div>
	<div class="vertical-align-helper"></div><!-- see http://jsfiddle.net/kizu/7Fewx/ -->
</div>

<div id="dialog-help" class="overlay2">
	<div class="dialog-title" data-i18n="Dialog Help.Title">How to Play</div>
	<div class="dialog-content">
		<div id="help-text-scroll">
			<span data-i18n="Dialog Help.Body Text">
				<p>For Terms &amp; Conditions, Privacy Policy and Support go to <a href="http://www.GameTreeTV.com">www.GameTreeTV.com</a>.</p>
				<h4>Object</h4>
				<p>Match and collect beautiful island creatures in this unforgettable journey. Watch your collection turn to gold as you travel from beach to jungle to volcano... reach the top before it erupts and win the ultimate treasure! Choose your difficulty and your destiny by selecting your own path around the island -- you'll lose yourself in GALAPAGO's addictive gameplay and beautiful settings.</p>
				<h4>Navigating Galapago</h4>
				<p>To play a level just select any tile on the map.</p>
				<p>New levels will unlock once you win a level.</p>
				<p>Remember that camp fires appear on levels already completed.</p>
				<h4>How To Play</h4>
				<p>Swap adjacent creatures vertically or horizontally to match them.</p>
				<h4>Gold Tiles</h4>
				<p>You must make matches over the gold tiles in order to complete the board.</p>
				<h4>Locked Tile</h4>
				<p>These tricky tiles have a creature locked inside. They can't be moved, but you can use them in a match to clear them off the board.</p>
				<h4>Cocoon Tile</h4>
				<p>Cocoon Tiles can't be moved, and can't be matched â€“ but matching three or more tiles adjacent to a Cocoon Tile will wake it up and clear it off your board.</p>
				<h4>Winning The Level</h4>
				<p>Clear the board of all the items in the collection key at the bottom of the board.</p>
				<p>A checkmark indicates that the goal is completed.</p>
				<p>The numbers show how many of each is left.</p>
				<h4>Bonus Frenzy</h4>
				<p>When you win a level, some creatures will flee the board - catch them using the arrow keys to charge up your powerups on the next level!</p>
				<h4>Flip-flop Powerup</h4>
				<p>Make multiple match combos to turn on this powerup!</p>
				<p>The Flip-Flop lets you swap two creatures anywhere on the board - they don't need to be adjacent!</p>
				<h4>Firepower Powerup</h4>
				<p>Make multiple match combos to turn on Firepower!</p>
				<p>Use Firepower to select a creature anywhere on the board and make it disappear.</p>
				<h4>Shuffler Powerup</h4>
				<p>Make multiple match combos to turn on the Shuffler!</p>
				<p>Use Shuffler to reshuffle all the creatures on the board.</p>
				<h4>Lightning Critters</h4>
				<p>Be on the lookout for the powerful Lightning Critters!</p>
				<p>Match three or more Lightning Critters and clear an entire row!</p>
				<h4>Super Match Friend</h4>
				<p>Use your Super Match Friend to clear all of one creature off the board!</p>

				<p>I-play is a trademark and trading name of Oberon Media, Inc. and its subsidiaries. &copy; 2008 Oberon Media. All Rights Reserved.</p>
				<p>&copy; TransGaming Interactive Corp. ALL RIGHTS RESERVED.</p>
			</span>
		</div>

		<div id="paging">Page <span id="current-page"></span> of <span id="page-count"></span></div>
		<ul class="vertical-button-nav">
			<li id="option-scroll" data-i18n="Dialog Help.ScrollDown" class="button-medium button-medium-hilight">Scroll</li>
			<li id="option-close" data-i18n="Dialog Help.Close" class="button-medium">Close</li>
		</ul>
		<div id="version"></div>		
	</div>
	<div class="vertical-align-helper"></div><!-- see http://jsfiddle.net/kizu/7Fewx/ -->
</div>

</body>
</html>